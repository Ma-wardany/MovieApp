<div class="card h-100 border-0 shadow-sm position-relative">
  <!-- IMAGE + RATING BADGE -->
  <div class="position-relative">
    <a [routerLink]="['/movie', movie.id]">
      <img
        [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
        [alt]="movie.title + ' Poster'"
        class="img-fluid w-100"
        style="aspect-ratio: 2/3; object-fit: cover;"
      />
    </a>
    <div
      class="rounded-circle position-absolute top-0 start-0 m-3"
      style="width: 50px; height: 50px;"
      [ngStyle]="{
        'background':
          'conic-gradient(' +
          getRatingColor(movie.vote_average) +
          ' ' +
          (movie.vote_average * 10) +
          '%, #e0e0e0 0)'
      }"
    >
      <div
        class="rounded-circle bg-dark text-white d-flex align-items-center justify-content-center fw-bold"
        style="width: 38px; height: 38px; font-size: 0.85rem;"
      >
        {{ (movie.vote_average * 10) | number:'1.0-0' }}%
      </div>
    </div>
  </div>

  <!-- TITLE, DATE, BUTTON ROW -->
  <div class="card-body d-flex flex-column justify-content-between p-3">
    <div>
      <h5 class="card-title fw-semibold mb-1">
        {{ getLimitedWords(movie.title, 5) }}
      </h5>
      <p class="text-muted mb-2 small">
        {{ movie.release_date }}
      </p>
    </div>

    <div class="d-flex align-items-center gap-2">
      <a
        class="btn btn-warning flex-grow-1 text-center fw-medium text-dark rounded-pill py-1"
        [routerLink]="['/movie', movie.id]"
      >
        View
      </a>
      <i
        [ngClass]="
          isInWishlist()
            ? 'fas fa-heart text-danger'
            : 'far fa-heart text-secondary'
        "
        (click)="toggleFavourite($event)"
        title="Toggle Favorite"
        class="fs-5 cursor-pointer"
      ></i>
    </div>
  </div>
</div>
